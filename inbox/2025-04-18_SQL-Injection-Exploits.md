---
date: 2025-04-18
type: fact
aliases:
  -
hubs:
  - "[[psql]]"
---

# SQL Injection Exploits

## What is SQL Injection

In [[2025-04-18_Finding-Particular-Users-(Bad-practice)|Finding Particular Users (Bad practice)]], we directly use template strings to create SQL queries. This is a very bad practice, as it can lead to SQL injection vulnerabilities.

```sh
$ curl http://localhost:3005/users/1; DROP TABLE users
#                                  ^^^^^^^^^^^^^^^^^^^ 
#                                  this string will be inserted into the SQL query directly
```

```js
// ...

class UserRepo {
  static async find() { ... }

  static async findById(id) {
    const { rows } = await pool.query(`SELECT * FROM users WHERE id = ${id}`);
    //                                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    //                                this template string will result `SELECT * FROM users WHERE id = 1; DROP TABLE users`

    return toCamelCase(rows)[0];
  }
}

module.exports = UserRepo;

```

Therefore, the user request will result in the entire table `users` being deleted, which is known as `SQL injection`.


## How to Prevent SQL Injection

1. We NEVER, EVER directly concatenate user-provided input into a SQL query.

2. There are a variety of safe ways to get user-provided input value into a SQL query string. We'll discuss them in the next topic.

