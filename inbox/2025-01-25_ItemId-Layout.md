---
date: 2025-01-25
type: fact
aliases:
  -
hubs:
  - "[[psql]]"
---

# ItemId Layout

Following [[2025-01-25_PageHeaderData-Layout|the page header]] are item identifiers (ItemIdData), each requiring four bytes. An item identifier contains:
- a byte-offset to the start of an item
- its length in bytes
- a few attribute bits which affect its interpretation.


![itemid-layout.png](../assets/imgs/itemid-layout.png)

```js
00000000: 00 00 00 00 B8 29 B8 22 00 00 04 00 E4 00 28 01  .....)."......(.
00000010: 00 20 04 20 00 00 00 00 A8 9F A2 00 30 9F E2 00  . . ........0...
//                               ^ end of PageHeaderData --> start of ItemIdDatas
00000020: 80 9E 5C 01 E0 9D 36 01 70 9D D2 00 C0 9C 56 01  ..\...6.p.....V.
00000030: 60 9C B2 00 A8 9B 6E 01 C8 9A C0 01 60 9A C6 00  `.....n.....`...
00000040: 68 99 EC 01 C0 98 46 01 10 98 54 01 B0 97 B2 00  h.....F...T.....
00000050: F0 96 72 01 98 96 A4 00 D8 95 7C 01 48 95 12 01  ..r.......|.H...
00000060: C8 94 FE 00 28 94 3A 01 C8 93 B8 00 10 93 6C 01  ....(.:.......l.
00000070: 70 92 34 01 A8 91 88 01 28 91 FC 00 98 90 1A 01  p.4.....(.......
00000080: F8 8F 3E 01 60 8F 22 01 70 8E DA 01 C8 8D 42 01  ..>.`.".p.....B.
00000090: 10 8D 66 01 B0 8C B8 00 C0 8B D2 01 68 8B AE 00  ..f.........h...
000000a0: A8 8A 76 01 A8 89 F2 01 48 89 BE 00 70 88 AC 01  ..v.....H...p...
000000b0: F8 87 E2 00 28 87 98 01 C8 86 B4 00 60 86 C2 00  ....(.......`...
000000c0: 08 86 AC 00 98 85 D6 00 D0 84 8E 01 10 84 7A 01  ..............z.
000000d0: 70 83 3A 01 E0 82 14 01 40 82 3A 01 80 81 7C 01  p.:.....@.:...|.
000000e0: 28 81 AC 00 00 00 00 00 00 00 00 00 00 00 00 00  (...............
//                   ^ start of free space --> end of ItemIdDatas
000000f0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................
00000100: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................
00000110: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................
00000120: 00 00 00 00 00 00 00 00 8D 03 00 00 00 00 00 00  ................
00000130: 00 00 00 00 00 00 00 00 33 00 0A 00 03 09 20 4F  ........3..... O
00000140: 02 00 00 00 00 00 00 00 CB 00 00 00 00 00 00 00  ................
//                               ^ end of free space
00000150: B8 C7 08 27 FF 31 01 00 B8 C7 08 27 FF 31 01 00  ...'.1.....'.1..
00000160: 0F 47 65 6E 65 37 36 1F 31 30 31 35 35 35 37 37  .Gene76.10155577
00000170: 34 32 38 33 35 34 11 6F 66 66 6C 69 6E 65 00 00  428354.offline..
00000180: 8D 03 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................
00000190: 32 00 0A 00 03 09 20 7F 02 00 00 00 00 00 00 00  2..... .........
000001a0: 32 00 00 00 00 00 00 00 E8 87 32 90 80 87 01 00  2.........2.....
000001b0: E8 87 32 90 80 87 01 00 0F 41 6C 74 61 34 39 53  ..2......Alta49S
000001c0: 49 6E 63 69 64 75 6E 74 20 65 6E 69 6D 20 71 75  Incidunt enim qu
000001d0: 69 20 73 75 6E 74 20 76 65 6E 69 61 6D 20 65 6E  i sunt veniam en

// (...omitted)

```

Above, we know where the ItemIdData starts and ends. With the information that each ItemIdData is 4 bytes long, we can know where are the first and last ItemIdData in the page.

```js
00000000: 00 00 00 00 B8 29 B8 22 00 00 04 00 E4 00 28 01  .....)."......(.
00000010: 00 20 04 20 00 00 00 00 A8 9F A2 00 30 9F E2 00  . . ........0...
//                                ^^^^^^^^^^^ the first ItemIdData
00000020: 80 9E 5C 01 E0 9D 36 01 70 9D D2 00 C0 9C 56 01  ..\...6.p.....V.
00000030: 60 9C B2 00 A8 9B 6E 01 C8 9A C0 01 60 9A C6 00  `.....n.....`...
00000040: 68 99 EC 01 C0 98 46 01 10 98 54 01 B0 97 B2 00  h.....F...T.....
00000050: F0 96 72 01 98 96 A4 00 D8 95 7C 01 48 95 12 01  ..r.......|.H...
00000060: C8 94 FE 00 28 94 3A 01 C8 93 B8 00 10 93 6C 01  ....(.:.......l.
00000070: 70 92 34 01 A8 91 88 01 28 91 FC 00 98 90 1A 01  p.4.....(.......
00000080: F8 8F 3E 01 60 8F 22 01 70 8E DA 01 C8 8D 42 01  ..>.`.".p.....B.
00000090: 10 8D 66 01 B0 8C B8 00 C0 8B D2 01 68 8B AE 00  ..f.........h...
000000a0: A8 8A 76 01 A8 89 F2 01 48 89 BE 00 70 88 AC 01  ..v.....H...p...
000000b0: F8 87 E2 00 28 87 98 01 C8 86 B4 00 60 86 C2 00  ....(.......`...
000000c0: 08 86 AC 00 98 85 D6 00 D0 84 8E 01 10 84 7A 01  ..............z.
000000d0: 70 83 3A 01 E0 82 14 01 40 82 3A 01 80 81 7C 01  p.:.....@.:...|.
000000e0: 28 81 AC 00 00 00 00 00 00 00 00 00 00 00 00 00  (...............
//        ^^^^^^^^^^^ the last ItemIdData
000000f0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................
00000100: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................
00000110: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................
00000120: 00 00 00 00 00 00 00 00 8D 03 00 00 00 00 00 00  ................
00000130: 00 00 00 00 00 00 00 00 33 00 0A 00 03 09 20 4F  ........3..... O
00000140: 02 00 00 00 00 00 00 00 CB 00 00 00 00 00 00 00  ................
//                               ^ end of free space
00000150: B8 C7 08 27 FF 31 01 00 B8 C7 08 27 FF 31 01 00  ...'.1.....'.1..
00000160: 0F 47 65 6E 65 37 36 1F 31 30 31 35 35 35 37 37  .Gene76.10155577
00000170: 34 32 38 33 35 34 11 6F 66 66 6C 69 6E 65 00 00  428354.offline..
00000180: 8D 03 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................
00000190: 32 00 0A 00 03 09 20 7F 02 00 00 00 00 00 00 00  2..... .........
000001a0: 32 00 00 00 00 00 00 00 E8 87 32 90 80 87 01 00  2.........2.....
000001b0: E8 87 32 90 80 87 01 00 0F 41 6C 74 61 34 39 53  ..2......Alta49S
000001c0: 49 6E 63 69 64 75 6E 74 20 65 6E 69 6D 20 71 75  Incidunt enim qu
000001d0: 69 20 73 75 6E 74 20 76 65 6E 69 61 6D 20 65 6E  i sunt veniam en

// (...omitted)

```

To figure out the offset and length of data from the ItemIdData is a bit tricky. Let's use the last ItemIdData `28 81 AC 00` as an example.

1. Check the second byte of the IntemIdData, It is `81`, which means `1000 0001` in binary. I'm gonna copy the only last sevent digits `000 0001` to somewhere.
2. Check the first byte of the IntemIdData, It is `28`, which means `0010 1000` in binary. I'm gonna copy all the digits `0010 1000` and paste after `000 0001` from the previous step. Now, we have `000 0001 0010 1000`.

3. Convert `000 0001 0010 1000` to decimal, we get `296`. This is the offset of the data from the start of the page.


```js
00000000: 00 00 00 00 B8 29 B8 22 00 00 04 00 E4 00 28 01  .....)."......(.
00000010: 00 20 04 20 00 00 00 00 A8 9F A2 00 30 9F E2 00  . . ........0...
00000020: 80 9E 5C 01 E0 9D 36 01 70 9D D2 00 C0 9C 56 01  ..\...6.p.....V.
00000030: 60 9C B2 00 A8 9B 6E 01 C8 9A C0 01 60 9A C6 00  `.....n.....`...
00000040: 68 99 EC 01 C0 98 46 01 10 98 54 01 B0 97 B2 00  h.....F...T.....
00000050: F0 96 72 01 98 96 A4 00 D8 95 7C 01 48 95 12 01  ..r.......|.H...
00000060: C8 94 FE 00 28 94 3A 01 C8 93 B8 00 10 93 6C 01  ....(.:.......l.
00000070: 70 92 34 01 A8 91 88 01 28 91 FC 00 98 90 1A 01  p.4.....(.......
00000080: F8 8F 3E 01 60 8F 22 01 70 8E DA 01 C8 8D 42 01  ..>.`.".p.....B.
00000090: 10 8D 66 01 B0 8C B8 00 C0 8B D2 01 68 8B AE 00  ..f.........h...
000000a0: A8 8A 76 01 A8 89 F2 01 48 89 BE 00 70 88 AC 01  ..v.....H...p...
000000b0: F8 87 E2 00 28 87 98 01 C8 86 B4 00 60 86 C2 00  ....(.......`...
000000c0: 08 86 AC 00 98 85 D6 00 D0 84 8E 01 10 84 7A 01  ..............z.
000000d0: 70 83 3A 01 E0 82 14 01 40 82 3A 01 80 81 7C 01  p.:.....@.:...|.
000000e0: 28 81 AC 00 00 00 00 00 00 00 00 00 00 00 00 00  (...............
//        ^^^^^ computed offset `296` to the data
000000f0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................
00000100: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................
00000110: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................
00000120: 00 00 00 00 00 00 00 00 8D 03 00 00 00 00 00 00  ................
//                               ^ offset `296` from the start of the page
00000130: 00 00 00 00 00 00 00 00 33 00 0A 00 03 09 20 4F  ........3..... O
00000140: 02 00 00 00 00 00 00 00 CB 00 00 00 00 00 00 00  ................
00000150: B8 C7 08 27 FF 31 01 00 B8 C7 08 27 FF 31 01 00  ...'.1.....'.1..
00000160: 0F 47 65 6E 65 37 36 1F 31 30 31 35 35 35 37 37  .Gene76.10155577
00000170: 34 32 38 33 35 34 11 6F 66 66 6C 69 6E 65 00 00  428354.offline..
00000180: 8D 03 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................
00000190: 32 00 0A 00 03 09 20 7F 02 00 00 00 00 00 00 00  2..... .........
000001a0: 32 00 00 00 00 00 00 00 E8 87 32 90 80 87 01 00  2.........2.....
000001b0: E8 87 32 90 80 87 01 00 0F 41 6C 74 61 34 39 53  ..2......Alta49S
000001c0: 49 6E 63 69 64 75 6E 74 20 65 6E 69 6D 20 71 75  Incidunt enim qu
000001d0: 69 20 73 75 6E 74 20 76 65 6E 69 61 6D 20 65 6E  i sunt veniam en

// (...omitted)

```

Then, we can calculate the length of the data. The third byte of the ItemIdData is `AC`, which means `1010 1100` in binary. Convert `1010 1100` to decimal, we get `172`. This is the length of the data.


```js
00000000: 00 00 00 00 B8 29 B8 22 00 00 04 00 E4 00 28 01  .....)."......(.
00000010: 00 20 04 20 00 00 00 00 A8 9F A2 00 30 9F E2 00  . . ........0...
00000020: 80 9E 5C 01 E0 9D 36 01 70 9D D2 00 C0 9C 56 01  ..\...6.p.....V.
00000030: 60 9C B2 00 A8 9B 6E 01 C8 9A C0 01 60 9A C6 00  `.....n.....`...
00000040: 68 99 EC 01 C0 98 46 01 10 98 54 01 B0 97 B2 00  h.....F...T.....
00000050: F0 96 72 01 98 96 A4 00 D8 95 7C 01 48 95 12 01  ..r.......|.H...
00000060: C8 94 FE 00 28 94 3A 01 C8 93 B8 00 10 93 6C 01  ....(.:.......l.
00000070: 70 92 34 01 A8 91 88 01 28 91 FC 00 98 90 1A 01  p.4.....(.......
00000080: F8 8F 3E 01 60 8F 22 01 70 8E DA 01 C8 8D 42 01  ..>.`.".p.....B.
00000090: 10 8D 66 01 B0 8C B8 00 C0 8B D2 01 68 8B AE 00  ..f.........h...
000000a0: A8 8A 76 01 A8 89 F2 01 48 89 BE 00 70 88 AC 01  ..v.....H...p...
000000b0: F8 87 E2 00 28 87 98 01 C8 86 B4 00 60 86 C2 00  ....(.......`...
000000c0: 08 86 AC 00 98 85 D6 00 D0 84 8E 01 10 84 7A 01  ..............z.
000000d0: 70 83 3A 01 E0 82 14 01 40 82 3A 01 80 81 7C 01  p.:.....@.:...|.
000000e0: 28 81 AC 00 00 00 00 00 00 00 00 00 00 00 00 00  (...............
//              ^^ computed length `172` of the data
000000f0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................
00000100: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................
00000110: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................
00000120: 00 00 00 00 00 00 00 00 8D 03 00 00 00 00 00 00  ................
//                               ^ start of the data
00000130: 00 00 00 00 00 00 00 00 33 00 0A 00 03 09 20 4F  ........3..... O
00000140: 02 00 00 00 00 00 00 00 CB 00 00 00 00 00 00 00  ................
00000150: B8 C7 08 27 FF 31 01 00 B8 C7 08 27 FF 31 01 00  ...'.1.....'.1..
00000160: 0F 47 65 6E 65 37 36 1F 31 30 31 35 35 35 37 37  .Gene76.10155577
00000170: 34 32 38 33 35 34 11 6F 66 66 6C 69 6E 65 00 00  428354.offline..
00000180: 8D 03 00 00 00 00 00 00 00 00 00 00 00 00 00 00  ................
00000190: 32 00 0A 00 03 09 20 7F 02 00 00 00 00 00 00 00  2..... .........
000001a0: 32 00 00 00 00 00 00 00 E8 87 32 90 80 87 01 00  2.........2.....
000001b0: E8 87 32 90 80 87 01 00 0F 41 6C 74 61 34 39 53  ..2......Alta49S
000001c0: 49 6E 63 69 64 75 6E 74 20 65 6E 69 6D 20 71 75  Incidunt enim qu
000001d0: 69 20 73 75 6E 74 20 76 65 6E 69 61 6D 20 65 6E  i sunt veniam en
//                   ^ end of the data

// (...omitted)

```
