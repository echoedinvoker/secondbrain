---
date: 2024-12-08
type: fact
aliases:
  -
hubs:
  - "[[sv5]]"
---

# Pass form data to backend by action

In [[2024-12-06_Handling-of-contact-me-section-in-backend-endpoint|last project]], we created an endpoint and used onsubmit event handler to send form data to the backend. In this project, we will use SvelteKit's `action` to send form data to the backend.

SvelteKit's `action` can save us from creating lots of state variables and event handlers. And it even works withouth JavaScript enabled.

We use the register form of [[2024-12-08_Styling-the-AuthForm-of-Book-Next|Book Next]] project to demonstrate how to send form data to the backend by action:

```bash
~/D/g/s/s/book-nest > tree src/
src/
│
(...)
│
└── routes
    ├── +layout.svelte
    ├── login
    │   └── +page.svelte
    ├── +page.svelte
    └── register
        ├── +page.server.ts  # instead of creating endpoint under `app` folder, we can create it under the route where the form is (page component)
        └── +page.svelte

```

```svelte
<!-- src/lib/components/AuthForm.svelte -->

<script lang="ts">
    import { Button } from "$components";

  interface AuthFormProps {
    isRegister?: boolean; 
  }

  let { isRegister }: AuthFormProps = $props();
</script>

<div class="auth-container default-margin">
  <h1 class="mb-l">{isRegister ? "Register" : "Login"}</h1>
  <div class="form-and-social-login">
    <form class="auth-form" method="POST">
                       <!-- ^^^^^^^^^^^^^ simply add `POST` method to form (it must be `POST`), -->
                       <!--               SvelteKit knows we want to use default action to send the form data to the backend -->

...(omit)...

```

Then, we start to write the action under `src/routes/register/+page.server.ts` we just created, you can directly check [official document of form action](https://svelte.dev/docs/kit/form-actions) to implement it. The document mentioned that we can easily progressively enhance your form interactions with JavaScript to provide the best user experience. But we won't do the progressive enhancement in this project, you can read the document to know more about it on your own.


```ts
// src/routes/register/+page.server.ts 

import type { Actions } from './$types'; // the content of `Actions` will be generated by SvelteKit based on the form data you have in the page component
                                         // so your `from` dirctory must be correct

export const actions = {  // we define all actions in the `actions` object

  // we didn't specify which action to use, so it will be used as `default` action by default
  default: async ({ request }) => {

    const formData = await request.formData();

    console.log(formData);
    // assume we input name:`aa` and email:`bb` and leave other fields empty and submit the form on the frontend
    // console output:
    // FormData {
    //   name: 'aa',
    //   email: 'bb',
    //   password: '',
    //   passwordConfirm: ''  <--- even we didn't fill the passwordConfirm field, it still exists the value of it is an empty string
    // }                           only when the name of field is not in the form, it will give `null` as the value of it

    // for type FormData, we must use `get` method to get the value of each field
    const name = formData.get('name') as string;
                                   // ^^^^^^^^^ we need to tell SvelteKit that the value is always a string
    const email = formData.get('email') as string;
    const password = formData.get('password') as string;
    const passwordConfirm = formData.get('passwordConfirm') as string;

    console.log({ name, email, password, passwordConfirm });
    // console output:
    // { name: 'aa', email: 'bb', password: '', passwordConfirm: '' }
  }
} satisfies Actions;
//^^^^^^^^^^^^^^^^^^ we use `satisfies Actions` to make sure the object we defined is the same as the `Actions` type

```
